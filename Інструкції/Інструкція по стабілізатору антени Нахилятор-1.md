# Інструкція по стабілізатору антен "Нахилятор-1"

*(під Betaflight)*
1. налаштовувати з встановленим акумулятором, щоб антена його не торкалась
2. використовувати модифіковану прошивку для бомберів, для камікадзе можна і звичайну  
Різниця в тому, що базовий Betaflight не вміє одночасно мати стабілізовані серви та звичайні.  
Тобто коли включений режим CAM STAB - активні лише SERVO1 та SERVO2.  
Модифікована прошивка вирішує це питання а також додає маленьке покращення:
Результуюче положення серви визначається значеннями min-->middle, middle-->max та масштабується між ними.  
Тобто якщо пульт присилає значення 1000 - це мапиться на min і передається до виконання сервою.  
Якщо max - відповідно, мапиться на max.  
1500 - на middle.  
Значення з пульта 1000(та менше)-1499.9999(9) будуть масштабуватись між min-middle  
Значення з пульта 1500-2000(та більше) будуть масштабуватись між middle-max.
Таким чином, можна отримати нелінійну шкалу та точно підібрати позицію middle.
(В базовому Betaflgiht middle не застосовувалось взагалі "центр" завджи був в положенні 1500)
3. налаштувати режим Servo Tilt.

  **В данному налаштуванні:**  
SERVO1 = регуляція по pitch  
SERVO2 = регуляція по roll  

4. Налаштувати режим стабілізації CAM STAB для автоматичного вирівнювання.
5. Всі фіксовані серви (поворотки камери, скиди, тощо) перенести/перемапити на порти після SERVO2 (використовувати SERVO3, SERVO4...)
бо перші два будуть зайняти стабілізацією.
6. Для стабілізованих перших двох серв підібрати підходящі коефіцієнти rate та положення middle  таким щоб:
в положенні middle коли коптер горизонтальний - антена стірчить рівно вертикально.
при нахилі - підібрати rate щоб антена зберігала вертикаль.
В моєму варіанті коефіціент склав 60%.
7. використовувати довгі пігтейли та довгі антени elrs, або розташовувати elrs приймач над vtx.  

### Кроки налаштувань в прошивці Betaflight
**крок 1** - серви рухаються (так, перед налаштуванням стабілізацій ви маєте бути на 100% певні, що серви робочі і здатні рухатись в принципі, рухитись командами з пульта)  
значення min/max для положень серви використовувати консервативні, щоб серва не вперлась кудись, не заблокувалась об корпус і т.д. починаєте налаштування з діапізону 1300-1800. Діапазон буде підібраний та збільшений пізніше.  
**крок 2** - режим CAM STAB виключений  
**крок 3** - зробити щоб не було Servo2 -- серви продовжують рухатись після цього кроку (і після всіх наступних)  
тобто щоб були servo1, servo3, servo4, … (це робиться методом swap ресурсів в налаштуванні betaflight)  
**крок 4** - на servo1 поставити стабілізатор антени  
**крок 5 **- переконатись що servo1 - це антена, і її можна рухати з пульта, servo3/4/5 -  інші серви і вони теж працюють  
**крок 6** - налаштувати min/middle/max кути для всіх серв. Кут стабілізатора антени налаштувати таким чином, щоб ні мачта, на elrs, на відео антена не торкались карбону та не торкались акумулятора.  
**крок 7** - налаштувати та активувати CAM STAB режим щоб його можна було включити з пульта. Для тестувань - на окрему кнопку, як все буде налаштоване і буде влаштовувати - то замапити на арм, щоб стабілізація була активна при армі завжди.  
**крок 8** - до servo1 підібрати rate коефіцієнт, починаючи підбір зі значення 60%. Підбирати таким чином, щоб у декількох основних положеннях коптера, антена завжди стірчала вертикально, без додаткових відхилень.
